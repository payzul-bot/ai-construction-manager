# AI Construction Platform — Imports Specification

## 1. Назначение документа

Этот документ описывает правила и ограничения импорта данных
в AI Construction Platform.

Импорт предназначен для:
- ускорения ввода данных;
- уменьшения ручной работы;
- использования существующих файлов заказчика.

Импорт **не является источником истины** и не заменяет расчётное ядро.

---

## 2. Общий принцип импорта

> Импорт ускоряет ввод, но не принимает решений.

Любые данные, полученные через импорт:
- считаются предварительными;
- требуют подтверждения пользователем;
- проходят валидацию ядром платформы.

Импорт **не может**:
- изменять технологию работ;
- обходить правила и запреты;
- напрямую формировать результат.

---

## 3. Поддерживаемые типы импорта (MVP)

### 3.1 Excel / CSV

Назначение:
- загрузка перечня работ;
- загрузка объёмов;
- ускорение формирования проекта.

Примеры данных:
- наименование работ;
- площади, объёмы, длины;
- комментарии ПТО.

---

### 3.2 Документы ПТО

Назначение:
- загрузка ведомостей;
- извлечение объёмов;
- предварительное сопоставление работ.

Ограничение:
- данные используются только после подтверждения.

---

### 3.3 Геодезические файлы (будущее)

Назначение:
- извлечение геометрии;
- расчёт объёмов земляных работ.

Статус:
- вне MVP;
- описывается заранее для масштабируемости.

---

## 4. Этапы обработки импорта

### 4.1 Загрузка

- файл загружается пользователем;
- проверяется формат;
- сохраняется как сырой источник.

---

### 4.2 Парсинг

- данные извлекаются из файла;
- приводятся к внутреннему формату;
- помечаются как импортированные.

---

### 4.3 Сопоставление (Mapping)

Импортированные данные сопоставляются с:
- WorkLeaf (канонические работы);
- параметрами расчёта;
- единицами измерения.

Если сопоставление неоднозначно:
- пользователь обязан выбрать вариант;
- автоматическое решение запрещено.

---

### 4.4 Подтверждение пользователем

Каждый импортированный параметр имеет статус:
- импортирован автоматически;
- требует подтверждения.

Без подтверждения данные **не участвуют в расчётах**.

---

## 5. Валидация и правила

Импортированные данные:
- валидируются по типу;
- валидируются по диапазонам;
- проверяются правилами ядра.

Если данные нарушают правила:
- расчёт блокируется;
- пользователю показывается причина.

---

## 6. Инварианты импорта (жёсткие правила)

Запрещено:
- автоматически добавлять работы;
- автоматически менять CalculationProfile;
- обходить QC и блокировки;
- формировать результат без подтверждения.

Разрешено:
- ускорять ввод;
- подсказывать варианты;
- предзаполнять wizard.

---

## 7. Версионирование импорта

Любой импорт:
- сохраняется как отдельный артефакт;
- привязывается к версии расчёта;
- доступен для аудита.

Изменение импортированных данных:
- создаёт новую версию результата.

---

## 8. Роль импорта в data moat

Импорт позволяет накапливать:
- реальные структуры смет;
- ошибки сопоставления;
- расхождения между планом и фактом.

Эти данные:
- не влияют на текущий расчёт;
- используются для улучшения платформы.

---

## 9. Что импорт НЕ делает

Импорт не:
- принимает инженерных решений;
- выбирает материалы;
- определяет технологию;
- заменяет специалиста.

---

## 10. Статус документа

Этот документ:
- обязателен для реализации импорта;
- расширяется по мере добавления форматов;
- меняется редко и версионируется.
